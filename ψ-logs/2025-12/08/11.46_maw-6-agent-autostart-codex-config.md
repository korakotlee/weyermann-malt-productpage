# MAW 6-Agent Auto-Start with Codex Config

**Time**: 11:46 GMT+7

## What We Learned

- **Codex config lives in `.codex/config.toml`** - Not JSON, and CODEX_HOME is set via `.envrc` to point to repo-local `.codex/` directory
- **Inline `-c` flags can be moved to config** - `model_reasoning_summary` and `model_reasoning_summary_format` work in config.toml
- **Multi-window detection uses WINDOW_0/WINDOW_1 variables** - These are set by layout creation code, not by profile files directly
- **Profile8 has semantic window separation** - Window 0 = Execution (Agents 1-3), Window 1 = Specialization (Agents 4-5) + Monitor

## How Things Connect

- **CODEX_HOME → .codex/config.toml**: The `.envrc` sets `CODEX_HOME="$codex_dir"` where `codex_dir="$codex_root/.codex"`, so all worktrees share the same config
- **AUTO_START_AGENTS → auto_start_agents()**: Env var gates the function, function checks WINDOW_0/WINDOW_1 for layout type
- **Profile files → Layout code → Window variables**: Profile sets LAYOUT_TYPE, layout code creates windows and sets WINDOW_0/WINDOW_1
- **Monitor pane = Window 1, Pane 3**: Explicitly skipped in agent startup (runs `maw status watch` instead)

## Key Discoveries

- **Pane numbering is 1-based in this setup** - PANE_BASE=1, so panes are 1.1, 1.2, 1.3 and 2.1, 2.2, 2.3
- **Node processes indicate running agents** - Both Claude and Codex show as `node` in `pane_current_command`
- **Codex web search requires `--enable web_search_request`** - This flag enables the web search capability

## Commits (Pending)

- `.codex/config.toml` - Added reasoning summary settings
- `.agents/scripts/start-agents.sh` - Updated auto_start_agents for 6 agents

## Tags
`maw` `codex` `tmux` `profile8` `6-agents` `auto-start` `config-toml` `multi-window`

## Raw Thoughts

- Could make AUTO_START_AGENTS default to 1 for convenience
- The `.envrc` CODEX_HOME setup is clever - all worktrees share auth/config
- Window naming could be more semantic (execution/specialist) in tmux
- Consider adding agent type (claude/codex) detection before spawning to avoid duplicates
